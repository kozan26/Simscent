---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .sort((a,b) => +new Date(b.data.date) - +new Date(a.data.date));

const hero = posts[0];
const heroImg = hero?.data.heroImage ?? 'https://images.unsplash.com/photo-1617839400561-d55457a29da2?q=80&w=1800&auto=format&fit=crop';
---
<BaseLayout title="Blog — simscent" description="Parfüm seçimi, notalar, akorlar ve koleksiyonlar hakkında kısa, pratik yazılar.">
  <!-- HERO -->
  <section class="hero">
    <div class="hero-img" style={`background-image:url('${heroImg}')`}></div>
    <h1>{hero ? hero.data.title : 'Simscent Blog'}</h1>
    <p>{hero ? (hero.data.description ?? '') : 'Parfüm dünyasında ilham verici yazılar.'}</p>
    {hero && <a class="cta" href={`/posts/${hero.slug}/`}>Devamını Oku</a>}
  </section>

  <!-- GRID -->
  <section class="wrap">
    <h2 class="h2">Son Yazılar</h2>
    <div class="grid">
      {posts.map((p) => <div class="col"><PostCard post={p} /></div>)}
    </div>
  </section>
</BaseLayout>
